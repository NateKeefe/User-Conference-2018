[{"Description":"Use this pattern to support high-availability","Valid":true,"Id":167249,"LastModificationDate":"2018-10-26T21:12:08.37","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"Managing Agents","NetChange":false,"NetChangeFieldName":"","ProcessDefinitionDbId":"e45678d5-f301-42ba-bc00-e1611bf16b69","SourceConnectionId":"0fd0240b-0365-4767-9140-61c7704518e2","SourceConnectionName":"Platform API (SB)","SourceConnectionAlias":"PlatformAPISB","StartingBlockId":"e55b62a2-1b36-4b45-8683-6895dc6c9fb8","SourceConnectionType":"Scribe Platform API","TargetConnections":[],"Version":"2.2","Blocks":[{"id":"e55b62a2-1b36-4b45-8683-6895dc6c9fb8","blockType":"Query","category":"Source","name":"Solution","description":"","label":"Query Solutions","originalBlockLabel":"Query","nextBlockId":"78739714-6db2-40d1-a955-4db21cb6f28b","parentBlockId":"","prevBlockId":"","x":76.0,"y":63.0,"entity":"Solution","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","filterItems":[{"compareValue":"3293","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"e0db6db8-744d-4bf2-85e2-c9e8b4ddf741"}],"relationships":[]},{"id":"78739714-6db2-40d1-a955-4db21cb6f28b","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Result","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"e55b62a2-1b36-4b45-8683-6895dc6c9fb8","firstChildBlockId":"62aacd55-8e32-457a-8dd1-0e6dd19294cc"},{"id":"62aacd55-8e32-457a-8dd1-0e6dd19294cc","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"If Solution is in bad state","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"78739714-6db2-40d1-a955-4db21cb6f28b","prevBlockId":"","firstChildBlockContainer1Id":"16ca87f6-c7dc-4b31-908c-244d728605a7","firstChildBlockContainer2Id":"4cb0ea3a-b1bc-444d-afe4-e222cae654cf","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"Solution.Status","logicalOperator":0,"rightExpression":"\"ProvisionError\"","id":"ff80dd82-b710-4eeb-aeb5-809860ef3eee"},{"conditionOperator":0,"leftExpression":"Solution.Status","logicalOperator":1,"rightExpression":"\"AgentShutdown\"","id":"2e75cc6d-736e-45f4-8caa-16f66a1abc30"},{"conditionOperator":0,"leftExpression":"Solution.Status","logicalOperator":1,"rightExpression":"\"AgentHeartbeatLate\"","id":"c61ffc3c-c952-4e9b-b0f7-5880789ee4a1"},{"conditionOperator":0,"leftExpression":"Solution.Status","logicalOperator":1,"rightExpression":"\"AgentHeartbeatFailed\"","id":"75d2eb85-0dbe-4d16-8cfe-062f13d3b3c2"}]},{"id":"16ca87f6-c7dc-4b31-908c-244d728605a7","blockType":"Lookup","category":"Source","name":"AgentLookup","description":"","label":"Lookup Agent to swap to","originalBlockLabel":"Lookup","nextBlockId":"e79c2757-bfbe-48c5-8485-718b2b575daf","parentBlockId":"62aacd55-8e32-457a-8dd1-0e6dd19294cc","prevBlockId":"","containerIndex":0,"entity":"Agent","cacheResults":false,"actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnMoreThanOneMessage":false,"onMoreThanOneMessage":"Operation returned more than 1 result.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnOneOrMoreMessage":false,"onOneOrMoreMessage":"Operation returned 1 or more results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"\"3293\"","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"4c01a24c-ad22-4be8-97c2-5a8cfd578c95"},{"compareValue":"\"Cloud Agent\"","comparisonOperator":0,"fieldName":"Name","logicalOperator":0,"id":"e0801a1e-8e02-41ae-a5c5-b276d4075392"}],"fieldsToLookup":["Id"]},{"id":"e79c2757-bfbe-48c5-8485-718b2b575daf","blockType":"Update","category":"Source","name":"SolutionUpdate","description":"","label":"Update Solution","originalBlockLabel":"Update","nextBlockId":"","parentBlockId":"62aacd55-8e32-457a-8dd1-0e6dd19294cc","prevBlockId":"16ca87f6-c7dc-4b31-908c-244d728605a7","containerIndex":0,"bulkCountPerOperation":2000,"useBulk":false,"entity":"Solution","actionName":"Update","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnNoMatchMessage":true,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"Id","logicalOperator":0,"id":"51f38bee-c129-4045-a196-d0430814b954"},{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"970e0b5e-7cbb-4393-8e23-14a77aefdd6e"}],"fieldMappings":[{"id":"d5d67813-4929-450f-97b2-e05fec340094","targetDataType":"System.Guid","targetField":"AgentId","targetFormula":"PlatformAPISB_AgentLookup.Id","path":"Solution"}]},{"id":"4cb0ea3a-b1bc-444d-afe4-e222cae654cf","blockType":"Comment","category":"Documentation","name":"Comment","description":"","label":"//skip Solution","originalBlockLabel":"Comment","nextBlockId":"","parentBlockId":"62aacd55-8e32-457a-8dd1-0e6dd19294cc","prevBlockId":""}],"Revision":4,"RevisionDate":"2018-10-26T17:48:20.717","RevisionComment":null},{"Description":"Use this design pattern to track historical executions and performance by Solution. Enhance this mapping to include errors and source data.","Valid":true,"Id":167247,"LastModificationDate":"2018-10-26T21:12:08.37","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"Export Execution History","NetChange":true,"NetChangeFieldName":"LastRunTime","ProcessDefinitionDbId":"f39edf42-73d1-49fe-afb8-273b35ab1675","SourceConnectionId":"0fd0240b-0365-4767-9140-61c7704518e2","SourceConnectionName":"Nate's Web API (SB)","SourceConnectionAlias":"NatesWebAPISB","StartingBlockId":"59462cc4-3abf-421a-80e5-b01857c1d7fa","SourceConnectionType":"Scribe Platform API","TargetConnections":[],"Version":"2.2","Blocks":[{"id":"59462cc4-3abf-421a-80e5-b01857c1d7fa","blockType":"Query","category":"Source","name":"Solution","description":"","label":"Query Scribe Solutions (filter by OrgId)","originalBlockLabel":"Query","nextBlockId":"35b4a471-382b-420a-84b1-02a499a345f5","parentBlockId":"","prevBlockId":"","x":74.0,"y":34.0,"entity":"Solution","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","filterItems":[{"compareValue":"20194","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"8d126cd7-072e-43e4-8813-8919c38fb551"}],"relationships":[]},{"id":"35b4a471-382b-420a-84b1-02a499a345f5","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Solution","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"59462cc4-3abf-421a-80e5-b01857c1d7fa","firstChildBlockId":"78de4329-7959-4a7e-bb50-fb70d49512f8"},{"id":"78de4329-7959-4a7e-bb50-fb70d49512f8","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"If (OPTIONAL: Filter by Solution Id)","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"35b4a471-382b-420a-84b1-02a499a345f5","prevBlockId":"","firstChildBlockContainer1Id":"7cd4ccd2-8018-4611-908c-72070e0858ab","firstChildBlockContainer2Id":"2fab3520-8932-447a-a20b-75199d985492","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"Solution.Id","logicalOperator":0,"rightExpression":"GUID( \"31a4fd13-4f6b-4ec5-931f-8c418492abb2\" )","id":"4932d157-2eb7-41ea-8201-63cb01c2c6b2"}]},{"id":"7cd4ccd2-8018-4611-908c-72070e0858ab","blockType":"Fetch","category":"Source","name":"HistoryFetch","description":"","label":"Fetch all its Executions","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"78de4329-7959-4a7e-bb50-fb70d49512f8","prevBlockId":"","containerIndex":0,"entity":"History","firstChildBlockId":"e7b628b7-a298-4407-9f5d-3cdc9cd47461","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"fc5d1190-a66e-498c-9b3c-a2ccfe638210"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"d906ba28-68de-44cd-b7b4-2d0b347e2812"}],"relationships":[]},{"id":"e7b628b7-a298-4407-9f5d-3cdc9cd47461","blockType":"IfElse","category":"Control","name":"IfElse2","description":"","label":"If History Result = RecordErrorsAndFatalErrors","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"7cd4ccd2-8018-4611-908c-72070e0858ab","prevBlockId":"","firstChildBlockContainer1Id":"2e5f25a0-ad0a-4045-8ca0-9efe3f926e68","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"NatesWebAPISB_HistoryFetch.Result","logicalOperator":0,"rightExpression":"\"RecordErrorsAndFatalErrors\"","id":"7a2cd55e-349c-4cbd-952a-d14c04a406de"}]},{"id":"2e5f25a0-ad0a-4045-8ca0-9efe3f926e68","blockType":"Fetch","category":"Source","name":"ErrorFetch","description":"","label":"Fetch Solution's Errors","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"e7b628b7-a298-4407-9f5d-3cdc9cd47461","prevBlockId":"","containerIndex":0,"entity":"Error","firstChildBlockId":"7476fc2e-f8a6-40fe-ac55-9f03b05eaf6f","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"NatesWebAPISB_HistoryFetch.Id","comparisonOperator":0,"fieldName":"HistoryId","logicalOperator":0,"id":"0c85ea33-463e-4d67-a5cb-542ac96882f6"},{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"70fc919b-67b7-4286-8bef-5e240991e6d2"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"f20b280e-f86b-43e7-93ed-0f91e240889b"}],"relationships":[]},{"id":"7476fc2e-f8a6-40fe-ac55-9f03b05eaf6f","blockType":"Comment","category":"Documentation","name":"Comment","description":"","label":"//Upsert rows to External Source","originalBlockLabel":"Comment","nextBlockId":"","parentBlockId":"2e5f25a0-ad0a-4045-8ca0-9efe3f926e68","prevBlockId":""},{"id":"2fab3520-8932-447a-a20b-75199d985492","blockType":"Continue","category":"Control","name":"Continue","description":"","label":"//Skip this solution","originalBlockLabel":"Continue","nextBlockId":"","parentBlockId":"78de4329-7959-4a7e-bb50-fb70d49512f8","prevBlockId":"","containerIndex":1,"childBlockId":"","isRowError":false,"nextAction":1,"rowErrorMessage":"Continue to next source record.  Label: [BLOCK LABEL], Name: [BLOCK NAME]"}],"Revision":9,"RevisionDate":"2018-10-26T17:39:00.537","RevisionComment":null},{"Description":"Use this design pattern to track historical executions and performance by Solution. Enhance this mapping to include errors and source data.","Valid":true,"Id":167248,"LastModificationDate":"2018-10-26T21:12:08.37","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"Reprocess failed rows","NetChange":false,"NetChangeFieldName":"","ProcessDefinitionDbId":"fc153478-73c2-4390-998f-3c56ef098741","SourceConnectionId":"0fd0240b-0365-4767-9140-61c7704518e2","SourceConnectionName":"Nate's Web API (SB)","SourceConnectionAlias":"NatesWebAPISB","StartingBlockId":"ef318930-bc50-4866-aab8-a48fdab4b6d8","SourceConnectionType":"Scribe Platform API","TargetConnections":[],"Version":"2.2","Blocks":[{"id":"ef318930-bc50-4866-aab8-a48fdab4b6d8","blockType":"Query","category":"Source","name":"Solution","description":"","label":"Query Solutions","originalBlockLabel":"Query","nextBlockId":"53fa108d-8816-44f8-ac9b-2125c0cea708","parentBlockId":"","prevBlockId":"","x":42.0,"y":18.0,"entity":"Solution","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","filterItems":[{"compareValue":"3293","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"58094097-f1c9-43f9-acfe-a3fe60253c64"}],"relationships":[]},{"id":"53fa108d-8816-44f8-ac9b-2125c0cea708","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Solution","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"ef318930-bc50-4866-aab8-a48fdab4b6d8","firstChildBlockId":"f8460596-2882-4afc-9829-dfefd4b96682"},{"id":"f8460596-2882-4afc-9829-dfefd4b96682","blockType":"Group","category":"Documentation","name":"Group","description":"","label":"Check Solution Status","originalBlockLabel":"Group","nextBlockId":"3b6bf999-f37a-491a-8bf4-dae0d5b8d84a","parentBlockId":"53fa108d-8816-44f8-ac9b-2125c0cea708","prevBlockId":"","firstChildBlockId":"bf92d36f-54db-4891-ae2a-4388a18d0cc0"},{"id":"bf92d36f-54db-4891-ae2a-4388a18d0cc0","blockType":"Loop","category":"Control","name":"Loop","description":"","label":"Check Solution Status (Loop)","originalBlockLabel":"Loop","nextBlockId":"","parentBlockId":"f8460596-2882-4afc-9829-dfefd4b96682","prevBlockId":"","firstChildBlockId":"f966c6d9-11c9-4a11-804e-e8abe32266a2"},{"id":"f966c6d9-11c9-4a11-804e-e8abe32266a2","blockType":"Lookup","category":"Source","name":"SolutionLookup","description":"","label":"Lookup Solution Status for Loop","originalBlockLabel":"Lookup","nextBlockId":"57af8f5f-31ae-4c69-be94-040c54b840b5","parentBlockId":"bf92d36f-54db-4891-ae2a-4388a18d0cc0","prevBlockId":"","entity":"Solution","cacheResults":false,"actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnMoreThanOneMessage":false,"onMoreThanOneMessage":"Operation returned more than 1 result.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnOneOrMoreMessage":false,"onOneOrMoreMessage":"Operation returned 1 or more results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"Id","logicalOperator":0,"id":"0f472c54-2e9a-4427-8e8f-d037978dfbfa"},{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"1165e0a8-6230-4d6f-b79b-6028ad4d0a3a"}],"fieldsToLookup":["Id","Status"]},{"id":"57af8f5f-31ae-4c69-be94-040c54b840b5","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"If Solution is ready to Prepare","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"bf92d36f-54db-4891-ae2a-4388a18d0cc0","prevBlockId":"f966c6d9-11c9-4a11-804e-e8abe32266a2","firstChildBlockContainer1Id":"2d841e85-a010-4022-ac04-99b682e75e68","firstChildBlockContainer2Id":"de5c6b17-767f-4ed3-98ac-a78dc0f3b88c","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"Solution.Status","logicalOperator":0,"rightExpression":"\"WaitingForEvent\"","id":"9c4b1e19-7d2b-4e60-aa52-6c72bf45f021"}]},{"id":"2d841e85-a010-4022-ac04-99b682e75e68","blockType":"LoopExit","category":"Control","name":"LoopExit","description":"","label":"Loop Exit to reprocess!","originalBlockLabel":"Loop Exit","nextBlockId":"","parentBlockId":"57af8f5f-31ae-4c69-be94-040c54b840b5","prevBlockId":""},{"id":"de5c6b17-767f-4ed3-98ac-a78dc0f3b88c","blockType":"Comment","category":"Documentation","name":"Comment","description":"","label":"//Lookup Solution Status Again","originalBlockLabel":"Comment","nextBlockId":"","parentBlockId":"57af8f5f-31ae-4c69-be94-040c54b840b5","prevBlockId":""},{"id":"3b6bf999-f37a-491a-8bf4-dae0d5b8d84a","blockType":"Fetch","category":"Source","name":"HistoryFetch","description":"","label":"Fetch Solution History","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"53fa108d-8816-44f8-ac9b-2125c0cea708","prevBlockId":"f8460596-2882-4afc-9829-dfefd4b96682","entity":"History","firstChildBlockId":"0f27712e-52a7-4c59-acee-3f2a8c8e84f2","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"4252a5e5-1819-47e3-a70c-3bdf8be58ae1"},{"compareValue":"\"b1b1c25a-2f7c-4af2-a8c9-7a332a83eaba\"","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"d88b0685-b886-42a6-aad8-0db9419f1394"}],"relationships":[]},{"id":"0f27712e-52a7-4c59-acee-3f2a8c8e84f2","blockType":"IfElse","category":"Control","name":"IfElse2","description":"","label":"If History Result = CompletedWithErrors","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"3b6bf999-f37a-491a-8bf4-dae0d5b8d84a","prevBlockId":"","firstChildBlockContainer1Id":"838e6f08-a3c9-448a-944c-368da7c29456","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"NatesWebAPISB_HistoryFetch.Result","logicalOperator":0,"rightExpression":"\"CompletedWithErrors\"","id":"0b4df2c8-063a-49cf-baca-c007fe78b59f"}]},{"id":"838e6f08-a3c9-448a-944c-368da7c29456","blockType":"Fetch","category":"Source","name":"ErrorFetch","description":"","label":"Fetch Solution's Errors","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"0f27712e-52a7-4c59-acee-3f2a8c8e84f2","prevBlockId":"","containerIndex":0,"entity":"Error","firstChildBlockId":"ea7c0204-e577-49ea-8765-949d8aa77386","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"NatesWebAPISB_HistoryFetch.Id","comparisonOperator":0,"fieldName":"HistoryId","logicalOperator":0,"id":"7663fbbd-67fb-4c5c-83b5-86aca4f489d5"},{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"e1c68c0b-b135-441d-b6cc-41fa9bb44043"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"08b08023-5ca3-4079-80be-4b8109ba0095"}],"relationships":[]},{"id":"ea7c0204-e577-49ea-8765-949d8aa77386","blockType":"Insert","category":"Source","name":"MarkAllErrorsCommand","description":null,"label":"Command MarkAllErrors","originalBlockLabel":"Command","nextBlockId":"2f88d580-decc-458a-a312-f806f0d2a1bd","parentBlockId":"838e6f08-a3c9-448a-944c-368da7c29456","prevBlockId":"","bulkCountPerOperation":2000,"useBulk":false,"entity":"MarkAllErrors","actionName":"Command","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","fieldMappings":[{"id":"9152142c-d9cd-4fa0-a442-1d17cbb20f3b","targetDataType":"System.String","targetField":"HistoryId","targetFormula":"NatesWebAPISB_HistoryFetch.Id","path":"MarkAllErrors"},{"id":"48f7de2e-dc89-4b5f-bc53-fc0cc43bb162","targetDataType":"System.Int32","targetField":"OrganizationId","targetFormula":"Solution.OrganizationId","path":"MarkAllErrors"},{"id":"e2ace5c5-9e32-4baf-b3e4-096fc292f476","targetDataType":"System.Guid","targetField":"SolutionId","targetFormula":"Solution.Id","path":"MarkAllErrors"},{"id":"3475490e-2e00-407c-8461-63dacf25f654","targetDataType":"System.Boolean","targetField":"Mark","targetFormula":"TRUE","path":"MarkAllErrors"}]},{"id":"2f88d580-decc-458a-a312-f806f0d2a1bd","blockType":"Insert","category":"Source","name":"ReprocessAllErrorsCommand","description":"","label":"Command ReprocessAllErrors","originalBlockLabel":"Command","nextBlockId":"","parentBlockId":"838e6f08-a3c9-448a-944c-368da7c29456","prevBlockId":"ea7c0204-e577-49ea-8765-949d8aa77386","bulkCountPerOperation":2000,"useBulk":false,"entity":"ReprocessAllErrors","actionName":"Command","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","fieldMappings":[{"id":"bdee9eb2-fef4-4cc4-bf9c-cc179f972bae","targetDataType":"System.String","targetField":"HistoryId","targetFormula":"NatesWebAPISB_HistoryFetch.Id","path":"ReprocessAllErrors"},{"id":"9bd2acef-cf08-4741-ac70-98ee1658db0c","targetDataType":"System.Int32","targetField":"OrganizationId","targetFormula":"Solution.OrganizationId","path":"ReprocessAllErrors"},{"id":"209ecc87-7148-4962-aec0-a09285972d8e","targetDataType":"System.Guid","targetField":"SolutionId","targetFormula":"Solution.Id","path":"ReprocessAllErrors"}]}],"Revision":5,"RevisionDate":"2018-10-26T17:23:44.507","RevisionComment":null},{"Description":"Use this design pattern to export failed rows from executions by Org/Solution.","Valid":true,"Id":167251,"LastModificationDate":"2018-10-26T21:41:53.427","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"Export Failed Rows","NetChange":true,"NetChangeFieldName":"LastRunTime","ProcessDefinitionDbId":"43e61cdc-3709-47de-8166-0bfba24205c6","SourceConnectionId":"0fd0240b-0365-4767-9140-61c7704518e2","SourceConnectionName":"Platform API (SB)","SourceConnectionAlias":"PlatformAPISB","StartingBlockId":"59462cc4-3abf-421a-80e5-b01857c1d7fa","SourceConnectionType":"Scribe Platform API","TargetConnections":[{"ConnectionAlias":"PlatformAPISandbox","ConnectionId":"d218e67a-1f9f-4dd4-a89e-a08524a15a82","ConnectionName":"Platform API (Sandbox)","ConnectionType":"REST Web Services"}],"Version":"2.2","Blocks":[{"id":"59462cc4-3abf-421a-80e5-b01857c1d7fa","blockType":"Query","category":"Source","name":"Solution","description":"","label":"Query Scribe Solutions (filter by OrgId)","originalBlockLabel":"Query","nextBlockId":"35b4a471-382b-420a-84b1-02a499a345f5","parentBlockId":"","prevBlockId":"","x":74.0,"y":34.0,"entity":"Solution","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","filterItems":[{"compareValue":"3293","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"8d126cd7-072e-43e4-8813-8919c38fb551"}],"relationships":[]},{"id":"35b4a471-382b-420a-84b1-02a499a345f5","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Solution","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"59462cc4-3abf-421a-80e5-b01857c1d7fa","firstChildBlockId":"78de4329-7959-4a7e-bb50-fb70d49512f8"},{"id":"78de4329-7959-4a7e-bb50-fb70d49512f8","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"If (OPTIONAL: Filter by Solution Id)","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"35b4a471-382b-420a-84b1-02a499a345f5","prevBlockId":"","firstChildBlockContainer1Id":"7cd4ccd2-8018-4611-908c-72070e0858ab","firstChildBlockContainer2Id":"2fab3520-8932-447a-a20b-75199d985492","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"Solution.Id","logicalOperator":0,"rightExpression":"GUID( \"31a4fd13-4f6b-4ec5-931f-8c418492abb2\" )","id":"4932d157-2eb7-41ea-8201-63cb01c2c6b2"}]},{"id":"7cd4ccd2-8018-4611-908c-72070e0858ab","blockType":"Fetch","category":"Source","name":"HistoryFetch","description":"","label":"Fetch all its Executions","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"78de4329-7959-4a7e-bb50-fb70d49512f8","prevBlockId":"","containerIndex":0,"entity":"History","firstChildBlockId":"e7b628b7-a298-4407-9f5d-3cdc9cd47461","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"fc5d1190-a66e-498c-9b3c-a2ccfe638210"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"d906ba28-68de-44cd-b7b4-2d0b347e2812"}],"relationships":[]},{"id":"e7b628b7-a298-4407-9f5d-3cdc9cd47461","blockType":"IfElse","category":"Control","name":"IfElse2","description":"","label":"If History Result = RecordErrorsAndFatalErrors","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"7cd4ccd2-8018-4611-908c-72070e0858ab","prevBlockId":"","firstChildBlockContainer1Id":"2e5f25a0-ad0a-4045-8ca0-9efe3f926e68","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"PlatformAPISB_HistoryFetch.Result","logicalOperator":0,"rightExpression":"\"RecordErrorsAndFatalErrors\"","id":"7a2cd55e-349c-4cbd-952a-d14c04a406de"}]},{"id":"2e5f25a0-ad0a-4045-8ca0-9efe3f926e68","blockType":"Fetch","category":"Source","name":"ErrorFetch","description":"","label":"Fetch Solution's Errors","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"e7b628b7-a298-4407-9f5d-3cdc9cd47461","prevBlockId":"","containerIndex":0,"entity":"Error","firstChildBlockId":"bddfa76a-307f-4c09-a6fa-e34e1cc0d594","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"PlatformAPISB_HistoryFetch.Id","comparisonOperator":0,"fieldName":"HistoryId","logicalOperator":0,"id":"0c85ea33-463e-4d67-a5cb-542ac96882f6"},{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"70fc919b-67b7-4286-8bef-5e240991e6d2"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"SolutionId","logicalOperator":0,"id":"f20b280e-f86b-43e7-93ed-0f91e240889b"}],"relationships":[]},{"id":"bddfa76a-307f-4c09-a6fa-e34e1cc0d594","blockType":"Fetch","category":"Target","name":"Get_v1orgsorgIdsolutionssolutionIdhistoryhistoryIdfailedrecordsidFetch","description":"","label":"Fetch Failed Records","originalBlockLabel":"Fetch","nextBlockId":"","parentBlockId":"2e5f25a0-ad0a-4045-8ca0-9efe3f926e68","prevBlockId":"","entity":"Get_v1orgsorgIdsolutionssolutionIdhistoryhistoryIdfailedrecordsid","firstChildBlockId":"1efbd679-cc1e-4a20-9697-c686daf01419","actionName":"Query","connectionId":"d218e67a-1f9f-4dd4-a89e-a08524a15a82","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"PlatformAPISB_HistoryFetch.Id","comparisonOperator":0,"fieldName":"uri_historyId","logicalOperator":0,"id":"deeebce5-96cc-4d54-89cc-cef7e5093f3a"},{"compareValue":"PlatformAPISB_ErrorFetch.Id","comparisonOperator":0,"fieldName":"uri_id","logicalOperator":0,"id":"4d726292-4dee-432a-98c0-50b86e384f17"},{"compareValue":"Solution.OrganizationId","comparisonOperator":0,"fieldName":"uri_orgId","logicalOperator":0,"id":"9909fff3-4cf6-426a-9813-9ef7759133fe"},{"compareValue":"Solution.Id","comparisonOperator":0,"fieldName":"uri_solutionId","logicalOperator":0,"id":"56cc8dc3-2ae8-4dd8-9d58-6ce93ab4fd5b"}],"relationships":[{"childPropertyName":"sourceData","entityName":"SourceData","isRequired":false,"parentPropertyName":"","relationshipType":2,"id":"d143e12a-2be0-474b-8693-7e4f58eb32cb","path":"Get_v1orgsorgIdsolutionssolutionIdhistoryhistoryIdfailedrecordsid.sourceData","relationshipAlias":"sourceData"},{"childPropertyName":"","entityName":"DataProperties","isRequired":false,"parentPropertyName":"properties","relationshipType":3,"id":"7ec471bc-4c13-4ba9-917c-0e56b4c15a6f","parentId":"d143e12a-2be0-474b-8693-7e4f58eb32cb","path":"Get_v1orgsorgIdsolutionssolutionIdhistoryhistoryIdfailedrecordsid.sourceData.properties","relationshipAlias":"properties"}]},{"id":"1efbd679-cc1e-4a20-9697-c686daf01419","blockType":"ForEachChild","category":"Control","name":"ForEachChild","description":"","label":"For Each Source Row Field","originalBlockLabel":"For Each Child","nextBlockId":"","parentBlockId":"bddfa76a-307f-4c09-a6fa-e34e1cc0d594","prevBlockId":"","relationshipNameForChild":"Get_v1orgsorgIdsolutionssolutionIdhistoryhistoryIdfailedrecordsid.sourceData.properties","firstChildBlockId":"7476fc2e-f8a6-40fe-ac55-9f03b05eaf6f"},{"id":"7476fc2e-f8a6-40fe-ac55-9f03b05eaf6f","blockType":"Comment","category":"Documentation","name":"Comment","description":"","label":"//Upsert KvPs to External Source","originalBlockLabel":"Comment","nextBlockId":"","parentBlockId":"1efbd679-cc1e-4a20-9697-c686daf01419","prevBlockId":""},{"id":"2fab3520-8932-447a-a20b-75199d985492","blockType":"Continue","category":"Control","name":"Continue","description":"","label":"//Skip this solution","originalBlockLabel":"Continue","nextBlockId":"","parentBlockId":"78de4329-7959-4a7e-bb50-fb70d49512f8","prevBlockId":"","containerIndex":1,"childBlockId":"","isRowError":false,"nextAction":1,"rowErrorMessage":"Continue to next source record.  Label: [BLOCK LABEL], Name: [BLOCK NAME]"}],"Revision":3,"RevisionDate":"2018-10-26T17:42:08.623","RevisionComment":null},{"Description":"Move solutions from test to production based on a Solution Description change","Valid":true,"Id":167250,"LastModificationDate":"2018-10-26T21:12:08.37","LastRunDate":null,"MapType":"IntegrationServicesAdvancedMap","Name":"Clone from Test Org to Production","NetChange":false,"NetChangeFieldName":null,"ProcessDefinitionDbId":"6bdb4b39-deec-418d-90c1-d65437693366","SourceConnectionId":"0fd0240b-0365-4767-9140-61c7704518e2","SourceConnectionName":"Platform API (SB)","SourceConnectionAlias":"PlatformAPISB","StartingBlockId":"f20e2ba4-38c3-433b-ab18-c18856747a05","SourceConnectionType":"Scribe Platform API","TargetConnections":[],"Version":"2.2","Blocks":[{"id":"f20e2ba4-38c3-433b-ab18-c18856747a05","blockType":"Query","category":"Source","name":"Solution","description":"","label":"Query Solutions from Test Org","originalBlockLabel":"Query","nextBlockId":"bc4c63a9-3607-418b-9f26-dcbca241ccf1","parentBlockId":"","prevBlockId":"","x":78.0,"y":56.0,"entity":"Solution","actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","filterItems":[{"compareValue":"\"Test OrgId Here\"","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"2b76e1fe-1aa9-4728-a87b-cba2b852621f"}],"relationships":[]},{"id":"bc4c63a9-3607-418b-9f26-dcbca241ccf1","blockType":"ForEach","category":"Control","name":"ForEach","description":"","label":"For Each Solution","originalBlockLabel":"For Each Result","nextBlockId":"","parentBlockId":"","prevBlockId":"f20e2ba4-38c3-433b-ab18-c18856747a05","firstChildBlockId":"f679e7ee-13bb-4233-8d8f-8420435fe2be"},{"id":"f679e7ee-13bb-4233-8d8f-8420435fe2be","blockType":"IfElse","category":"Control","name":"IfElse","description":"","label":"If Solution is ready for Production push","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"bc4c63a9-3607-418b-9f26-dcbca241ccf1","prevBlockId":"","firstChildBlockContainer1Id":"d60eb607-10c0-4065-9bbe-06cbb535a509","firstChildBlockContainer2Id":"","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"Solution.Description","logicalOperator":0,"rightExpression":"\"Production Ready\"","id":"afccf51e-a01c-4525-b5e6-4f6a0187b62c"},{"conditionOperator":0,"leftExpression":"Solution.SolutionType","logicalOperator":0,"rightExpression":"\"Integration\"","id":"a83db11a-9590-4686-8b22-a36b5c0b84ac"},{"conditionOperator":1,"leftExpression":"Solution.Status","logicalOperator":0,"rightExpression":"\"Incomplete\"","id":"933e25a9-f484-4073-a538-8a882f8875a7"}]},{"id":"d60eb607-10c0-4065-9bbe-06cbb535a509","blockType":"Lookup","category":"Source","name":"SolutionLookup","description":"","label":"Look for existing Production Solution","originalBlockLabel":"Lookup","nextBlockId":"ad09463c-f08d-4827-a3e6-14d621bbfe8f","parentBlockId":"f679e7ee-13bb-4233-8d8f-8420435fe2be","prevBlockId":"","containerIndex":0,"entity":"Solution","cacheResults":false,"actionName":"Query","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnMoreThanOneMessage":true,"onMoreThanOneMessage":"More than one solution was found. Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnOneOrMoreMessage":false,"onOneOrMoreMessage":"Operation returned 1 or more results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnNoMatchMessage":false,"onNoMatchMessage":"Operation returned no results.  Label: [BLOCK LABEL], Name: [BLOCK NAME]","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","filterItems":[{"compareValue":"\"Production OrgId here\"","comparisonOperator":0,"fieldName":"OrganizationId","logicalOperator":0,"id":"0e456121-85cf-4551-9e03-151c2fddf3b4"},{"compareValue":"Solution.Name","comparisonOperator":0,"fieldName":"Name","logicalOperator":0,"id":"9175b57d-b2c9-45de-a3bd-9930c6765622"}],"fieldsToLookup":["Id"]},{"id":"ad09463c-f08d-4827-a3e6-14d621bbfe8f","blockType":"IfElse","category":"Control","name":"IfElse2","description":"","label":"If Solution does not exist","originalBlockLabel":"If","nextBlockId":"","parentBlockId":"f679e7ee-13bb-4233-8d8f-8420435fe2be","prevBlockId":"d60eb607-10c0-4065-9bbe-06cbb535a509","containerIndex":0,"firstChildBlockContainer1Id":"15d7f1f0-32ba-4413-80a6-a1e387faa81d","firstChildBlockContainer2Id":"aea7b5b2-0707-49c1-857f-31a25033a480","elseLabel":"else","expressionItems":[{"conditionOperator":0,"leftExpression":"PlatformAPISB_SolutionLookup.Result.RecordsMatched","logicalOperator":0,"rightExpression":"0","id":"7226a3ba-7092-4bbb-b70d-36198c573074"}]},{"id":"15d7f1f0-32ba-4413-80a6-a1e387faa81d","blockType":"Insert","category":"Source","name":"CloneSolutionCommand","description":"","label":"Command CloneSolution","originalBlockLabel":"Command","nextBlockId":"","parentBlockId":"ad09463c-f08d-4827-a3e6-14d621bbfe8f","prevBlockId":"","containerIndex":0,"bulkCountPerOperation":2000,"useBulk":false,"entity":"CloneSolution","actionName":"Command","connectionId":"0fd0240b-0365-4767-9140-61c7704518e2","isOnErrorMessage":true,"onErrorMessage":"Operation failed.  Label: [BLOCK LABEL], Name: [BLOCK NAME], Message: [ORIGINAL MESSAGE]","fieldMappings":[{"id":"fced44e3-5e49-4623-be4d-27344d951200","targetDataType":"System.Guid","targetField":"DestinationAgentId","targetFormula":"\"Your Production Agent\"","path":"CloneSolution"},{"id":"1acc0ee9-d8e4-439e-a7bf-020a8604c765","targetDataType":"System.Int32","targetField":"DestinationOrganizationId","targetFormula":"Solution.OrganizationId","path":"CloneSolution"},{"id":"db136e0e-8313-4844-a4d2-dcfa733c4fc2","targetDataType":"System.Guid","targetField":"SolutionId","targetFormula":"Solution.Id","path":"CloneSolution"},{"id":"284a079c-8d22-451e-8cde-0e612ded4206","targetDataType":"System.Int32","targetField":"OrganizationId","targetFormula":"Solution.OrganizationId","path":"CloneSolution"}]},{"id":"aea7b5b2-0707-49c1-857f-31a25033a480","blockType":"Continue","category":"Control","name":"Continue","description":null,"label":"Continue to ForEachResult","originalBlockLabel":"Continue","nextBlockId":"","parentBlockId":"ad09463c-f08d-4827-a3e6-14d621bbfe8f","prevBlockId":"","containerIndex":1,"childBlockId":"","isRowError":false,"nextAction":1,"rowErrorMessage":"Continue to next source record.  Label: [BLOCK LABEL], Name: [BLOCK NAME]"}],"Revision":5,"RevisionDate":"2018-10-26T18:47:00.4","RevisionComment":null}]